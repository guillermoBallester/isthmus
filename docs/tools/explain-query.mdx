---
title: "explain_query"
description: "Show the PostgreSQL execution plan for a SQL query."
---

## Description

Show the PostgreSQL execution plan for a SQL query. Returns the query planner's strategy including scan types, join methods, and cost estimates. Use this to understand query performance before or after running a query.

Supports `ANALYZE` to include actual execution statistics (the query WILL be executed when `analyze` is true).

## Parameters

| Parameter | Type | Required | Description |
|---|---|---|---|
| `sql` | string | Yes | The SELECT query to explain (without the `EXPLAIN` keyword) |
| `analyze` | boolean | No | Include actual execution statistics. Defaults to `false`. When `true`, the query is executed. |

## Response schema

Returns an array of plan line objects. Each object contains a single `QUERY PLAN` field with one line of the execution plan:

```json
[
  { "QUERY PLAN": "..." },
  ...
]
```

## Example

**Request:**
```json
{
  "sql": "SELECT id, status FROM orders WHERE status = 'paid'",
  "analyze": false
}
```

**Response:**
```json
[
  { "QUERY PLAN": "Seq Scan on orders  (cost=0.00..5410.00 rows=86800 width=52)" },
  { "QUERY PLAN": "  Filter: (status = 'paid'::text)" }
]
```

**With `analyze: true`:**
```json
[
  { "QUERY PLAN": "Seq Scan on orders  (cost=0.00..5410.00 rows=86800 width=52) (actual time=0.015..32.450 rows=86800 loops=1)" },
  { "QUERY PLAN": "  Filter: (status = 'paid'::text)" },
  { "QUERY PLAN": "  Rows Removed by Filter: 161200" },
  { "QUERY PLAN": "Planning Time: 0.085 ms" },
  { "QUERY PLAN": "Execution Time: 45.230 ms" }
]
```

## Notes

- You provide the `SELECT` query only â€” Isthmus prepends `EXPLAIN` or `EXPLAIN ANALYZE` automatically. Do not include the `EXPLAIN` keyword in your `sql` parameter.
- With `analyze: false` (default), only the planner's estimates are shown. The query is not executed.
- With `analyze: true`, the query is actually executed inside a read-only transaction, so actual row counts, timing, and buffer usage are included.
- The same SQL validation rules apply: only `SELECT` statements are allowed.
